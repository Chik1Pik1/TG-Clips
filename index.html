<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-logo"><i class="fas fa-video"></i></div>
            <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
            <p>–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram –∏–ª–∏ –∫–∞–∫ –≥–æ—Å—Ç—å</p>
            <button id="authBtn" class="auth-btn">
                <i class="fab fa-telegram-plane"></i> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
            </button>
            <button id="registerChannelBtn" class="register-channel-btn auth-btn" style="margin-top: 20px;">
                –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–∞–ª
            </button>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–ª–µ–µ—Ä–∞ -->
    <div id="playerContainer" class="container">
        <div class="video-wrapper">
            <video id="videoPlayer" playsinline>
                <source id="videoSource" src="" type="video/mp4">
            </video>
        </div>

        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="top-bar">
            <div id="rating">‚òÖ 0.0</div>
            <div class="view-count"><i class="fas fa-eye"></i> <span id="viewCount">0</span></div>
        </div>

        <!-- –û–±–ª–∞—Å—Ç—å —Å–≤–∞–π–ø–æ–≤ -->
        <div id="swipeArea" class="swipe-area"></div>

        <!-- –ü–∞–Ω–µ–ª—å —Ä–µ–∞–∫—Ü–∏–π -->
        <div id="reactionBar" class="reaction-bar">
            <button class="reaction-btn" data-type="like">
                <span>üëç</span>
                <small id="likeCount">0</small>
            </button>
            <button class="reaction-btn" data-type="dislike">
                <span>üëé</span>
                <small id="dislikeCount">0</small>
            </button>
            <button class="reaction-btn" data-type="comment">
                <span>üí¨</span>
                <small id="commentCount">0</small>
            </button>
            <button class="reaction-btn" data-type="share">
                <span>üì§</span>
                <small id="shareCount">0</small>
            </button>
            <button class="theme-toggle">
                <span>üåô</span>
            </button>
        </div>
        <button class="toggle-reaction-bar"><i class="fas fa-arrow-left"></i></button>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="bottom-buttons">
            <img id="userAvatar" src="https://placehold.co/30" alt="User Avatar">
            <button class="plus-btn"><i class="fas fa-plus"></i></button>
            <img id="playerAvatar" src="https://placehold.co/30" alt="Player Avatar">
            <button class="upload-btn"><i class="fas fa-download"></i></button>
        </div>

        <!-- –ü–æ–¥–º–µ–Ω—é -->
        <div id="uploadVideo" class="submenu upload">
            <i class="fas fa-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å
        </div>
        <div id="chatAuthor" class="submenu chat">
            <i class="fas fa-comment"></i> –ß–∞—Ç
        </div>

        <!-- –ê–Ω–∏–º–∞—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–π -->
        <div id="reactionAnimation" class="reaction-animation"></div>

        <!-- –ü–æ–ª–æ—Å–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
        <div id="progressBar" class="progress-bar">
            <input type="range" id="progressRange" min="0" value="0" step="0.1">
        </div>

        <!-- –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ -->
        <div id="videoDescriptionDisplay"></div>
        <div class="bottom-bar-overlay"></div>

        <!-- –û–∫–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
        <div id="commentsWindow" class="comments-window">
            <div class="drag-handle"></div>
            <div id="commentsList" class="comments-list"></div>
            <div class="comment-input">
                <input id="commentInput" type="text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...">
                <button id="sendComment"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="uploadModal" class="upload-modal">
            <div class="upload-modal-content">
                <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ</h2>
                <div class="upload-progress">
                    <div id="progressBarInner" class="progress-bar-inner"></div>
                </div>
                <video id="uploadPreview" controls></video>
                <textarea id="videoDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ..."></textarea>
                <div class="upload-actions">
                    <button id="publishBtn">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                    <button id="cancelBtn">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç–∞ -->
        <div id="chatModal" class="chat-modal">
            <div class="chat-modal-content">
                <h2>–ß–∞—Ç —Å –∞–≤—Ç–æ—Ä–æ–º</h2>
                <div id="chatMessages" class="chat-messages"></div>
                <div class="chat-input">
                    <input id="chatInput" type="text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button id="sendChatMessage"><i class="fas fa-paper-plane"></i></button>
                </div>
                <button id="closeChat" style="margin-top: 10px;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —à–∞—Ä–∏–Ω–≥–∞ -->
        <div id="shareModal" class="share-modal">
            <div class="share-modal-content">
                <h2>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤–∏–¥–µ–æ</h2>
                <div class="share-actions">
                    <button id="shareTelegram"><i class="fab fa-telegram-plane"></i> Telegram</button>
                    <button id="copyLink"><i class="fas fa-link"></i> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                </div>
                <button id="closeShare" style="margin-top: 10px;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
        <button class="fullscreen-btn"><i class="fas fa-expand"></i></button>

        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
        <div id="tooltipSwipe" class="tooltip">–°–≤–∞–π–ø–∞–π—Ç–µ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–µ–æ</div>
        <div id="tooltipReactions" class="tooltip">–†–µ–∞–∫—Ü–∏–∏ –∑–¥–µ—Å—å</div>
        <div id="tooltipUpload" class="tooltip">–ó–∞–≥—Ä—É–∑–∫–∞ –∏ —á–∞—Ç</div>
        <div id="tooltipTheme" class="tooltip">–°–º–µ–Ω–∞ —Ç–µ–º—ã</div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
    <script>
        const videoManager = new VideoManager();
        videoManager.init();
    </script>
</body>
</html>
